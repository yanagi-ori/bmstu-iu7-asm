# Процессор 8086. Регистр флагов

Флаги выставляются при выполнении операций, в основном арифметических. С помощью этих флагов можно определить,
например, было ли переполнение при последней выполненной операции.

Каждый флаг представляет собой 1 бит, выставленный в 0 (сброшен) или 1 (установлен).

Разрядность регистра FLAGS - 16 бит, но не все они используются.
Остальные были зарезервированы при разработке процессора, но так и не были использованы.

| 0  | 1 | 2  | 3 | 4  | 5 | 6  | 7  | 8  | 9  | 10 | 11 | 12   | 13   | 14 | 15 |
|----|---|----|---|----|---|----|----|----|----|----|----|------|------|----|----|
| CF | - | PF | - | AF | - | ZF | SF | TF | IF | DF | OF | IOPL | IOPL | NT | -  |

| Флаг | Расшифровка         | Описание                                                                                                                                                  |
|------|---------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| CF   | carry               | Флаг переноса. Устанавливается в 1, если результат предыдущей операции не уместился в приемник и произошел перенос или если требуется заем при вычитании. |
| PF   | parity              | Флаг четности. Устанавливается в 1, если младший значащий байт результата предыдущей операции содержит четное количество единиц.                          |
| AF   | auxiliary carry     | Флаг вспомогательного переноса. Устанавливается в 1, если в результате предыдущей операции произошел перенос из 3-го разряда в 4-й или заем из 4 в 3.     |
| ZF   | zero                | Флаг нуля. Устанавливается в 1, если результат предыдущей операции равен 0.                                                                               |
| SF   | sign                | Флаг знака. Всегда равен старшему биту результата.                                                                                                        |
| TF   | trap                | Флаг ловушки/трассировки. Если установлен в 1, то после выполнения каждой команды процессор останавливается и передает управление отладчику.              |
| IF   | interrupt           | Флаг разрешения прерываний. Если установлен в 0, то процессор перестает обрабатывать прерывания от внешних устройств.                                     |
| DF   | direction           | Флаг направления. Определяет направление обработки элементов при работе со строками. Если 0 - слева направо, если 1 - справа налево.                      |
| OF   | overflow            | Флаг переполнения. Устанавливается в 1, если результат предыдущей операции над числами со знаком выходит за допустимые для них пределы.                   |
| IOPL | i/o privilege level | Флаг привилегий ввода/вывода. (286)                                                                                                                       |
| NT   | nested task         | Флаг вложенной задачи. (286)                                                                                                                              |

Существуют команды, которые позволяют производить манипуляции с отдельными битами флагов.

1. STC - устанавливает флаг CF в 1.
2. CLC - устанавливает флаг CF в 0.
3. STD - устанавливает флаг DF в 1.
4. CLD - устанавливает флаг DF в 0.
5. STI - устанавливает флаг IF в 1.
6. CLI - устанавливает флаг IF в 0.

* pushf - помещает в стек значение регистра флагов.
* popf - извлекает из стека значение регистра флагов.